{
  "hash": "ce3e0ffd43e604df698854d60540c64f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Hands-on_Ex02\"\nauthor: \"Cathy C.\"\ndate-modified: \"last-modified\" \nexecute:\n  echo: true \n  eval: true \n  warning: false \n  freeze: true\n---\n\n\n\n# Beyond ggplot2 Fundamentals\n\n## [2.1]{style=\"color:skyblue\"} Overview\n\nSeveral **ggplot2 extensions** for creating more elegant and effective statistical graphics. By the end of this exercise, one will be able to:\n\n-   control the placement of annotation on a graph by using functions provided in **ggrepel** package.\n-   create professional publication quality figure by using functions provided in **ggthemes** and **hrbrthemes** packages; and\n-   plot composite figure by combing ggplot2 graphs by using **patchwork** package.\n\n## [2.2]{style=\"color:skyblue\"} Getting started\n\n### [2.2.1]{style=\"color:skyblue\"} Installing and loading the required libraries\n\nIn this exercise, besides **tidyverse**, four R packages will be used.\n\nThey are:\n\n1.  **ggrepel:** a R package provides geoms for ggplot2 to repel overlapping text labels.\n2.  **ggthemes:** a R package provides some extra themes, geoms, and scales for ggplot.\n3.  **hrbrthemes**: a R package provides typographu-centric themes and theme components for ggplot2.\n4.  **patchwork:** a R package for preparing composite figure created using ggplot2.\n\nCode chunk below will be used to **check** if these packages have been installed and **also load them** onto the working R environment.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(ggrepel, patchwork,\n               ggthemes, hrbrthemes,\n               tidyverse) #all packages are then installed.\n```\n:::\n\n\n\n### [2.2.2]{style=\"color:skyblue\"} Importing data\n\nFor the purpose of this exercise, a data file called Exam_data will be used. It consists of year end examination grades of a cohort of primary 3 students from a local school. It is in csv file format.\n\nThe code chunk below imports exam_data.csv into R environment by using [`read_csv()`](https://readr.tidyverse.org/reference/read_delim.html) function of [**readr**](https://readr.tidyverse.org/) package. **readr** is one of the tidyversepackage.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readr)\nexam_data <- read_csv(\"data/Exam_data.csv\")\n```\n:::\n\n\n\nThere are a total of seven attributes in the exam_data tibble data frame. Four of them are categorical data type and the other three are in continuous data type.\n\n-   The categorical attributes are ID, CLASS, GENDER and RACE.\n-   The continuous attributes are MATHS, ENGLISH and SCIENCE.\n\n## [2.3]{style=\"color:skyblue\"} Beyond ggplot Annotation: ggrepel\n\nOne of the challenge in plotting statistical graph is annotation, especially with large number of data points.\n\n::: panel-tabset\n## Plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n## Code\n\n``` r\nggplot(data=exam_data,\n       aes(x = MATHS,\n           y = ENGLISH)) +\n  geom_point() +\n  geom_smooth(method=lm,\n              linewidth=0.5) +\n  geom_label(aes(label = ID),\n             hjust = .5,\n             vjust = -.5) +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100)) +\n  ggtitle(\"English scores versus Maths scores for Primary 3\")\n```\n\n## 🦖 Practice\n\n🦖 **Used colours to differentiate genders.**\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data,\n       aes(x = MATHS,\n           y = ENGLISH)) +\n  geom_point() +\n  geom_smooth(method=lm,\n              linewidth=0.5) +\n  geom_label(aes(label = ID,\n                 colour = GENDER), #added colours\n             hjust = .5,\n             vjust = -.5) +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100)) +\n  ggtitle(\"English scores versus Maths scores for Primary 3\")\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n:::\n\n[**ggrepel**](https://ggrepel.slowkow.com/) ![](/Hands-on_Ex/Hands-on_Ex03/images/ggrepel_logo.jpg){width=\"40\"} is an extension of **ggplot2** package which provides `geoms` for **ggplot2** to repel overlapping text as in the examples below.\n\n![](/Hands-on_Ex/Hands-on_Ex03/images/ggrepel.jpg){fig-align=\"center\" width=\"700\"}\n\nWe simply replace `geom_text()` by [`geom_text_repel()`](https://ggrepel.slowkow.com/reference/geom_text_repel.html) and `geom_label()` with [`geom_label_repel()`](https://ggrepel.slowkow.com/reference/geom_text_repel.html).\n\n### [2.3.1]{style=\"color:skyblue\"} Working with ggrepel\n\n::: panel-tabset\n## Plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n## Code\n\n```{.r}\nggplot(data=exam_data,\n       aes(x = MATHS,\n           y = ENGLISH)) +\n  geom_point() +\n  geom_smooth(method = lm,\n              size = 0.5) +\n  geom_label_repel(aes(label = ID),\n                   fontface = \"bold\") +\n  coord_cartesian(xlim = c(0,100),\n                  ylim = c(0,100)) +\n  ggtitle(\"English scores vs Maths scores for P3\")\n```\n\n## 🦖 Practice\n\n🦖 Applied colours to differentiate genders.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data,\n       aes(x = MATHS,\n           y = ENGLISH)) +\n  geom_point() +\n  geom_smooth(method = lm,\n              size = 0.5) +\n  geom_label_repel(aes(label = ID,\n                       colour = GENDER), #colour for gender\n                   fontface = \"bold\") +\n  coord_cartesian(xlim = c(0,100),\n                  ylim = c(0,100)) +\n  ggtitle(\"English scores vs Maths scores for P3\")\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n:::\n\n## [2.4]{style=\"color:skyblue\"} Beyond ggplot2 Themes\n\nggplot2 comes with eight built-in themes. They are:\n\n`theme_gray()`, `theme_bw()`, `theme_classic()`, `theme_dark()`, `theme_light()`, `theme_linedraw()`, `theme_minimal()`, `theme_void()`.\n\n::: panel-tabset\n## Plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n## Code\n\n```{.r}\nggplot(data=exam_data,\n       aes(x = MATHS)) +\n  geom_histogram(bins = 20,\n                 boundary = 100,\n                 color = \"grey25\",\n                 fill = \"grey90\") +\n  theme_gray() +\n  ggtitle(\"Distribution of Maths scores\")\n```\n\n## 🦖  Practice I\n\n🦖 Applied `theme_light()` and different colors for fill and color.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data,\n       aes(x = MATHS)) +\n  geom_histogram(bins = 20,\n                 boundary = 100,\n                 color = \"grey90\",\n                 fill = \"pink\") +\n  theme_light() +\n  ggtitle(\"Distribution of Maths scores\")\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n## 🦖  Practice II \n\n🦖 Applied `theme_dark()` and different colors for fill and color.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data,\n       aes(x = MATHS)) +\n  geom_histogram(bins = 20,\n                 boundary = 100,\n                 color = \"grey90\",\n                 fill = \"skyblue\") +\n  theme_dark() +\n  ggtitle(\"Distribution of Maths scores\")\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n:::\n\n::: column-margin\n🦄 Refer to this [link](https://ggplot2.tidyverse.org/reference/#themes) to learn more about ggplot2 `Themes`\n:::\n\n### [2.4.1]{style=\"color:skyblue\"} Working with ggtheme package\n\n[**ggthemes**](https://cran.r-project.org/web/packages/ggthemes/) provides [**ggplot2 themes**](https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/) that replicate the look of plots by Edward Tuffe, Stephen Few, [Fivethirtyeight](https://fivethirtyeight.com/), [The Economist](https://www.economist.com/graphic-detail), \\'Stata\\', \\'Excel\\', and [The Wall Street Journal](https://www.pinterest.com/wsjgraphics/wsj-graphics/), among others.\n\nIn the example below, *The Economist* theme is used.\n\n::: panel-tabset\n## Plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n## Code\n\n```{.r}\nggplot(data=exam_data,\n       aes(x = MATHS)) +\n  geom_histogram(bins = 20,\n                 boundary = 100,\n                 color = \"grey25\",\n                 fill = \"grey90\") +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_economist()\n```\n\n## 🦖  Practice\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data,\n       aes(x = MATHS)) +\n  geom_histogram(bins = 20,\n                 boundary = 100,\n                 color = \"grey25\",\n                 fill = \"grey90\",\n                 linewidth = 0.3) +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_stata()\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n:::\n\nIt also provides some extra geoms and scales fpr ggplot2. Consult [this vignette](https://mran.microsoft.com/snapshot/2016-12-28/web/packages/ggthemes/vignettes/ggthemes.html) to learn more. *\\*Link is broken as of Jan 19.*\n\n### [2.4.2]{style=\"color:skyblue\"} Working with hrbthemes package\n\n## [2.5]{style=\"color:skyblue\"} Beyond Single Graph\n\n### [2.5.1]{style=\"color:skyblue\"} Creating Composite Graphics: patchwork methods\n\n### [2.5.2]{style=\"color:skyblue\"} Combing two ggplot2 graphs\n\n### [2.5.3]{style=\"color:skyblue\"} Combining three ggplot2 graphs\n\n### [2.5.4]{style=\"color:skyblue\"} Creating a composite figure with tag\n\n### [2.5.5]{style=\"color:skyblue\"} Creating figure with insert\n\n### [2.5.6]{style=\"color:skyblue\"} Creating a composite figure by using patchwork and ggtheme\n\n## [2.6]{style=\"color:skyblue\"} Reference\n",
    "supporting": [
      "Hands-on_Ex02_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}